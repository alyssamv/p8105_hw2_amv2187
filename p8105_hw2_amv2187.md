p8105\_hw2\_amv2187
================
Alyssa Vanderbeek
10/1/2018

Problem 1
---------

``` r
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
```

    ## ── Attaching packages ───────────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.0.0     ✔ purrr   0.2.5
    ## ✔ tibble  1.4.2     ✔ dplyr   0.7.6
    ## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
    ## ✔ readr   1.1.1     ✔ forcats 0.3.0

    ## ── Conflicts ──────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
transit_data_clean = read_csv("data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>%
  mutate(entry = recode(entry, 'YES' = TRUE, 'NO' = FALSE))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
head(transit_data_clean)
```

    ## # A tibble: 6 x 19
    ##   line  station_name station_latitude station_longitu… route1 route2 route3
    ##   <chr> <chr>                   <dbl>            <dbl> <chr>  <chr>  <chr> 
    ## 1 4 Av… 25th St                  40.7            -74.0 R      <NA>   <NA>  
    ## 2 4 Av… 25th St                  40.7            -74.0 R      <NA>   <NA>  
    ## 3 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 4 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 5 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 6 4 Av… 45th St                  40.6            -74.0 R      <NA>   <NA>  
    ## # ... with 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entry <lgl>, vending <chr>, entrance_type <chr>,
    ## #   ada <lgl>

The cleaned dataset contains information about subway stations: the station name, the line it runs, its latitude and longitudinal location, the routes it services, whether entry exists and of what kind (stairs vs. elevator), and whether the station is ADA compliant. To learn and clean the data, I first imported and cleaned the column names. I looked at the list of column names to understand what variables are available. Then I examined the unique values in a few of the columns to get a sense of how many distinct values there were. Lastly, I checked whether or not there were any missing values in the "Route 1" column. This would determine whether there were any stations (row entries) that had no routes associated. This would have been redundant and I would filter these rows out of the dataset. After cleaning the data as instructed, the dataset dimension are 1868 rows by 19 columns. As of now, this dataset is not tidy.

``` r
# number of distinct stations, defined by both name and line
transit_data_clean %>%
  distinct(station_name, line) %>%
  nrow
```

    ## [1] 465

``` r
# number of ADA compliant stations
transit_data_clean %>%
  select(station_name, line, ada) %>%
  unique %>%
  filter(ada == TRUE) %>%
  nrow
```

    ## [1] 84

``` r
# proportion of stations entrances/exits without vending allow entrance
transit_data_clean %>%
  filter(vending == 'NO') %>%
  summarise(sum(entry) / nrow(.))
```

    ## # A tibble: 1 x 1
    ##   `sum(entry)/nrow(.)`
    ##                  <dbl>
    ## 1                0.377

``` r
transit_data_tidy = transit_data_clean %>%
  gather(key = 'route', value = 'line', route1:route11) %>%
  distinct %>%
  filter(!is.na(line))

transit_data_tidy %>%
  filter(line == 'A') %>%
  distinct %>%
  nrow
```

    ## [1] 91

``` r
transit_data_tidy %>%
  filter(line == 'A', ada == TRUE) %>%
  distinct %>%  
  nrow
```

    ## [1] 34
